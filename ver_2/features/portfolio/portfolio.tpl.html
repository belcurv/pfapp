<!-- ===================== TITLE SECTION ====================== -->
<section>
    <div class="content-box">
        <div class="Grid">
            
            <div class="Grid-cell">
                <h1>Portfolio</h1>
            </div>
            
            <div>
                <h1 title="Save your input data" class="icon-button" ng-click="vm.pfMethods.saveState()">
                    <span class="glyphicon glyphicon-floppy-disk"></span>
                </h1>
                <h1 title="Erase your input data" class="icon-button" ng-click="vm.pfMethods.deleteData()">
                    <span class="glyphicon glyphicon-floppy-remove"></span>
                </h1>
            </div>
            
        </div>
        
    </div>
</section>
<!-- =================== END TITLE SECTION ==================== -->

<!-- ===================== INPUTS SECTION ===================== -->
<section class=Grid-cell>
    <div class="content-box">

        <!-- inputs title -->
        <div class="Grid">
            <div class="Grid-cell">
                <h4>HOLDINGS</h4>
            </div>
            <div>
                <h4 title="Help" class="icon-button" ng-click="inputHelpToggle = !inputHelpToggle">
                    <span class="glyphicon glyphicon-question-sign"></span>
                </h4>
            </div>
        </div>

        <!-- help -->
        <div ng-if="inputHelpToggle" class="help">
            <p>Input your portfolio components.</p>

            <ul>
                <li><em>Ticker</em> = The letter abbreviation for the investment.</li>
                <li><em>Shares</em> = The quantity of shares of each investment you own.</li>
            </ul>
        </div>

        <!-- Table -->
        <table class="pf-table">
            <thead>
                <th style="">Holding</th>
                <th style="">Value ($)</th>
                <th>Class</th>
                <th style="">10-yr Return (%)</th>
                <th style="width: 18px"></th>
                <th style="width: 18px"></th>
            </thead>
            <tbody>
                <tr ng-repeat="e in vm.state.investments track by $index">
                    <td>
                        <input tabindex="{{$index + 1}}" type="text" ng-model="e.ticker">
                    </td>
                    <td>
                        <input tabindex="{{$index + 1}}" type="number" ng-model="e.value">
                    </td>
                    <td>
                        <select name="class" tabindex="{{$index + 1}}" ng-model="e.type">
                            <option value="Stock">Stock</option>
                            <option value="Bond">Bond</option>
                        </select>
                    </td>
                    <td>
                        <input tabindex="{{$index + 1}}" type="number" min="0.00" max="100.00" step="0.0001" ng-model="e.avgReturn">
                    </td>
                    <td title="Update holding" class="icon-button"
                           tabindex="{{$index + 1}}"
                           ng-click="vm.pfMethods.saveState()">
                            <!-- Update -->
                            <span class="glyphicon glyphicon-floppy-disk"></span>
                        </button>
                    </td>
                    <td title="Delete holding" class="icon-button" tabindex="{{$index + 1}}"
                           ng-click="vm.pfMethods.deleteInvestment($index)">
                            <!-- Delete -->
                            <span class="glyphicon glyphicon-trash"></span>
                    </td>
                </tr>
                <tr>
                    <td>
                        <input name="ticker" tabindex="999" type="text" ng-model="vm.state.newTicker" placeholder="New holding...">
                    </td>
                    <td>
                        <input name="value" tabindex="999" type="number" ng-model="vm.state.newTickerValue">
                    </td>
                    <td>
                        <select name="class" tabindex="999" ng-model="vm.state.newTickerType">
                            <option value="Stock">Stock</option>
                            <option value="Bond">Bond</option>
                        </select>
                    </td>
                    <td>
                        <input name="avgReturn" tabindex="999" type="number" min="0.00" max="100.00" step="0.0001" ng-model="vm.state.newAvgReturn">
                    </td>
                    <td></td>
                    <td title="Add new holding" class="icon-button" tabindex="999" 
                        ng-click="vm.pfMethods.addInvestment(vm.state.newTicker, vm.state.newTickerValue, vm.state.newTickerType, vm.state.newAvgReturn)">
                        <!-- ADD -->
                        <span class="glyphicon glyphicon-plus"></span>
                    </td>
                </tr>
            </tbody>
        </table>
        
        <!-- Advise source of input data -->
        <alert-message message="{{vm.portfolioDataSource}}"></alert-message>

    </div>
</section>


<section>
    <div class="content-box">
       
        <p>Total Value of Portfolio: {{vm.pfMethods.sumPortfolioValue(vm.state.investments) | currency }}</p>
        
        <p>Sum of asset class 'Stocks': {{ vm.pfMethods.sumInvestmentValue(vm.state.investments, "Stock") | currency }}</p>
        
        <p>Sum of asset class 'Bonds': {{ vm.pfMethods.sumInvestmentValue(vm.state.investments, "Bond") | currency }}</p>
        
        <p>Allocation Ratio: {{ (100 * vm.pfMethods.ratioStocks(vm.state.investments)) | number:1 }}% / {{ (100 * (1 - vm.pfMethods.ratioStocks(vm.state.investments))) | number:1 }}% (stocks / bonds)</p>

        <p>Aggregate total return: {{vm.pfMethods.avgPortfolioReturn(vm.state.investments) * 100 | number:2 }}%</p>
        
    </div>
    
    
</section>